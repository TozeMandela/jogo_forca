let sorteios= [{ sugestao: 'fruta',
                Element : [
                    "Abacate"
                    ,"Abacaxi"
                    ,"Abiu"
                    ,"Abricó"
                    ,"Abrunho"
                    ,"Açaí"
                    ,"Acerola"
                    ,"Akee"
                    ,"Alfarroba"
                    ,"Ameixa"
                    ,"Amêndoa"
                    ,"Amora"
                    ,"Ananás"
                    ,"Anona"
                    ,"Araçá"
                    ,"Arando"
                    ,"Araticum"
                    ,"Ata"
                    ,"Atemoia"
                    ,"Avelã"
                    ,"Babaco"
                    ,"Babaçu"
                    ,"Bacaba"
                    ,"Bacuri"
                    ,"Bacupari"
                    ,"Banana"
                    ,"Baru"
                    ,"Bergamota"
                    ,"Biribá"
                    ,"Buriti"
                    ,"Butiá"
                    ,"Cabeludinha"
                    ,"Cacau"
                    ,"Cagaita"
                    ,"Caimito"
                    ,"Cajá"
                    ,"Caju"
                    ,"Calabaça"
                    ,"Calabura"
                    ,"Calamondin"
                    ,"Cambucá"
                    ,"Cambuci"
                    ,"Camu-camu"
                    ,"Caqui"
                    ,"Carambola"
                    ,"Carnaúba"
                    ,"Castanha"
                    ,"Castanha-do-pará"
                    ,"Cereja"
                    ,"Ciriguela"
                    ,"Ciruela"
                    ,"Coco"
                    ,"Cranberry"
                    ,"Cupuaçu"
                    ,"Damasco"
                    ,"Dekopon"
                    ,"Dendê"
                    ,"Dióspiro"
                    ,"Dovyalis"
                    ,"Durião"
                    ,"Embaúba"
                    ,"Embaubarana"
                    ,"Engkala"
                    ,"Escropari"
                    ,"Esfregadinha"
                    ,"Figo"
                    ,"Framboesa"
                    ,"Fruta do conde"
                    ,"Fruta pão"
                    ,"Feijoa"
                    ,"Figo da índia"
                    ,"Fruta de cedro"
                    ,"Fruta de lobo"
                    ,"Fruta do milagre"
                    ,"Fruta de tatu"
                    ,"Gabiroba"
                    ,"Glicosmis"
                    ,"Goiaba"
                    ,"Granadilla"
                    ,"Gravatá"
                    ,"Graviola"
                    ,"Groselha"
                    ,"Grumixama"
                    ,"Guabiju"
                    ,"Guabiroba"
                    ,"Guaraná"
                    ,"Hawthorn"
                    ,"Heisteria"
                    ,"Hilocéreo"
                    ,"Ibacurupari"
                    ,"Ilama"
                    ,"Imbe"
                    ,"Imbu"
                    ,"Inajá"
                    ,"Ingá"
                    ,"Inharé"
                    ,"Jabuticaba"
                    ,"Jaca"
                    ,"Jambo"
                    ,"Jambolão"
                    ,"Jamelão"
                    ,"Jaracatiá"
                    ,"Jatobá"
                    ,"Jenipapo"
                    ,"Jerivá"
                    ,"Juá"
                    ,"Jujuba"
                    ,"Kiwi"
                    ,"Kumquat"
                    ,"Kinkan"
                    ,"Kino"
                    ,"Kiwano"
                    ,"Kabosu"
                    ,"Karité"
                    ,"Laranja"
                    ,"Limão"
                    ,"Lima"
                    ,"Lichia"
                    ,"Longan"
                    ,"Lucuma"
                    ,"Lacucha"
                    ,"Lulo"
                    ,"Lobeira"
                    ,"Langsat"
                    ,"Laranja-de-pacu"
                    ,"Mabolo"
                    ,"Maçã"
                    ,"Macadâmia"
                    ,"Macaúba"
                    ,"Mamão"
                    ,"Mamey"
                    ,"Mamoncillo"
                    ,"Maná-cubiu"
                    ,"Manga"
                    ,"Mangaba"
                    ,"Mangostão"
                    ,"Maracujá"
                    ,"Marang"
                    ,"Marmelo"
                    ,"Marolo"
                    ,"Marula"
                    ,"Massala"
                    ,"Melancia"
                    ,"Melão"
                    ,"Meloa"
                    ,"Mexerica"
                    ,"Mirtilo"
                    ,"Morango"
                    ,"Murici"
                    ,"Naranjilla"
                    ,"Nectarina"
                    ,"Nêspera"
                    ,"Noni"
                    ,"Noz"
                    ,"Noz-pecã"
                    ,"Noz-macadâmia"
                    ,"Oiti"
                    ,"Oxicoco"
                    ,"Orangelo"
                    ,"Pera"
                    ,"Pêssego"
                    ,"Pitanga"
                    ,"Pinha"
                    ,"Pitaia"
                    ,"Pitomba"
                    ,"Pitangatuba"
                    ,"Pindaíba"
                    ,"Pequi"
                    ,"Pequiá"
                    ,"Physalis"
                    ,"Pulasan"
                    ,"Pomelo"
                    ,"Pupunha"
                    ,"Puçá"
                    ,"Patauá"
                    ,"Pajurá"
                    ,"Pixirica"
                    ,"Pistache"
                    ,"Quina"
                    ,"Quiuí"
                    ,"Romã"
                    ,"Rambai"
                    ,"Rambutão"
                    ,"Rukam"
                    ,"Saguaraji"
                    ,"Salak"
                    ,"Santol"
                    ,"Sapota"
                    ,"Sapoti"
                    ,"Sapucaia"
                    ,"Saputá"
                    ,"Seriguela"
                    ,"Sorvinha"
                    ,"Tangerina"
                    ,"Tamarindo"
                    ,"Tâmara"
                    ,"Toranja"
                    ,"Tucumã"
                    ,"Taiuva"
                    ,"Tapiá"
                    ,"Tarumã"
                    ,"Tangor"
                    ,"Tucujá"
                    ,"Uva"
                    ,"Umbu"
                    ,"Uvaia"
                    ,"Uchuva"
                    ,"Umê"
                    ,"Uxi"
                    ,"Vacínio"
                    ,"Veludo"
                    ,"Vergamota"
                    ,"Wampi"
                    ,"Xixá"
                    ,"Yamamomo"
                    ,"Yuzu"
                    ,"Zimbro"
                        ]
            },{ sugestao: 'cantores do Morrão',
                 Element : ['Alpha O Pica','durões',
                        'bufalo','new class 00',
                        'negão','peraBem',
                        'dj naype','miro star boy'
                    ]
        },{ sugestao: 'nome de Carros',
        Element : ["Agrale"
                    ,"Audi"
                    ,"bmw"
                    ,"Bianco"
                    ,"Brasinca"
                    ,"Chamonix"
                    ,"Chevrolet"
                    ,"Citroën"
                    ,"DKW-Vemag"
                    ,"Dodge"
                    ,"Engesa"
                    ,"Envemo"
                    ,"Fiat"
                    ,"FNM"
                    ,"Ford"
                    ,"Gurgel"
                    ,"Honda"
                    ,"Indústrias Romi"
                    ,"Lafer S/A"
                    ,"Lobini"
                    ,"Mahindra by Bramont"
                    ,"Mercedes-Benz"
                    ,"Miúra"
                    ,"Peugeot – PSA Peugeot Citroën"
                    ,"Puma"
                    ,"Renault"
                    ,"Romi"
                    ,"Simca do Brasil"
                    ,"Toyota"
                    ,"Troller"
                    ,"Volkswagen"
                    ,"Willys Overland"]
}];
let $mainAside = document.querySelector('main>.left');
let $mainSection = document.querySelector('main>.rigth');
let $suggestion = document.querySelector('section>.sugestao>h2>.spansuggest');
let $chance = document.querySelector('section>.sugestao>h2>.chance>span');
let $question = document.querySelector('section>div.perguntas>p');
let $pontuacao = document.querySelector('section>div.tentativas>h2>span');
let $vida = document.querySelector('aside>div.vida>h2>span');
let button = document.querySelectorAll('section>aside>nav>div');
let $img = document.querySelector('main>aside>img.perdedor');
let indexImg = 6;
let Ctjogo = false;
let controlVida = 0;
function selectIndexElement(arrayPosi){
    return Math.floor(Math.random()*arrayPosi.length-1)+1;
}

function getTraco(Strings){
    let array = [];
    while(array.length<Strings.length){
        array.push('_');
    }
    return array;
}

function remuveElementSelectedToArray(array, indexElement){
    return array.splice(indexElement, 1);
}

let indexSuggestSelected;
let indexElemenSelected;
let elementSelected;
let Arraytraco;
let chance;

function initializeVariables(){

    indexSuggestSelected = selectIndexElement(sorteios)
    indexElemenSelected = selectIndexElement(sorteios[indexSuggestSelected].Element);
    elementSelected = remuveElementSelectedToArray(sorteios[indexSuggestSelected].Element, 
    indexElemenSelected)[0].split('');
    elementSelected = getTOUpperCase(elementSelected);
    Arraytraco = getTraco(elementSelected);
    chance = chances(Arraytraco);

    $suggestion.innerHTML=sorteios[indexSuggestSelected].sugestao;
    console.log(elementSelected, indexElemenSelected, sorteios[indexSuggestSelected].Element, Arraytraco)
}

initializeVariables();

function getTOUpperCase(array){  
    for(let i =0; i < array.length; i++){ 
        array[i] = array[i].toUpperCase();
    }
    return array;
}

function substValue(str, value){
    let arrAux = [];
    str.some((element, index) => {
        if(element===value){
            arrAux.push(index);
        }
    });
    return arrAux;
}

function  isEquals(array1, array2){

    return array1.join('')===array2.join('');

}

function isWin(arrT, arr2){
   let aux = arrT.some(element =>{
        return element!=='_';
    });
    if(aux){
        if (isEquals(arrT,arr2)) {
            indexImg = 0;
            selectedImg(indexImg);
            let aux = Number($pontuacao.innerHTML);
            $pontuacao.innerHTML = aux+1;
            Ctjogo = true;
        }
        if (Ctjogo) {
            selectedImg(indexImg);
            initJogo(Ctjogo)
            Ctjogo=false;
        }
        
    }
}

function selectedImg(indice){
    if((indice===1 && indice!==0)|| (indice < 7 && indice!==0)){
        $img.src=`../../mult-media/img/perdendo/perdendo${indice}.png`;
    }else if(indice===0){
        $img.src=`../../mult-media/img/ganhando/ganhando${indice}.png`;
    }
}

function chances(arrayToString){
    let chance;
    if(arrayToString.length <= 6){
        chance = 8;
    }else if(arrayToString.length <= 13){
        chance = 15;
    }else if(arrayToString.length <= 17){
        chance = 19;
    }

    return chance;
}

function existValue(arr, arrTraco, value){
    let aux = false;
    arr.forEach(element => {
        if(value===arrTraco[element]){
            aux = true;
        }
    });

    if(aux){
        arr = [-1];
    }

    return arr;
}

function substractcheArrayTraco(arr, arrTraco, value){
    let aux = Number($vida.innerHTML);
    arr = existValue(arr, arrTraco, value);
    if(aux!==10){
        if(arr.length!==0){
            if(arr[0]===-1){
                alert('já utilizamos está letra...\ntente uma letra diferente de ', value)
            }else{
                arr.forEach(element => {
                arrTraco[element]=value;
                });
            }
        }else{ 
            chance = chance - 1;
            $vida.innerHTML = aux-10;
            controlVida = controlVida + 1;
            if(controlVida % 2 ===0){
                indexImg-=1;
            }
        }
    }else{
        $vida.innerHTML = '00';
        indexImg-=1;
        alert('foste inforcado...\n A palavra correta é: '+ elementSelected.join(''))
        elementSelected =[];
    }

    selectedImg(indexImg);
}
function changeBackGround(vida){
    let aux = Number(vida.innerHTML);
    if(aux<50){
        $mainAside.removeAttribute('class');
        $mainSection.removeAttribute('class');
        $mainSection.setAttribute('class','rigths');
        $mainAside.setAttribute('class','lefts');
    }
}

button.forEach(btn=>{
    btn.addEventListener('click', function (){

        let Value = this.innerHTML.toUpperCase();
        let indexToBeReplaced = substValue(elementSelected, Value);
        substractcheArrayTraco(indexToBeReplaced,Arraytraco,Value);
        viewData();
        $question.innerHTML= Arraytraco.join(' ');
        changeBackGround($vida);
        isWin(elementSelected, Arraytraco);

      });
      
});
function initJogo(boll){
    selectedImg(indexImg);
    console.log('entrei...')
    indexImg = 6;
    indexImg =6;
    selectedImg(indexImg)
    initializeVariables();
    viewData();
    boll=false;
}
function viewData(){
    $chance.innerHTML = chance;
    $question.innerHTML= Arraytraco.join(' ');
}
viewData();